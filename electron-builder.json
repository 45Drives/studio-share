{
  "appId": "com.45studio.flow",
  "productName": "45Flow",
  "directories": { "output": "dist" },
  "artifactName": "${productName}-${version}-${os}-${arch}.${ext}",
  "publish": { "provider": "github", "owner": "45Drives", "repo": "studio-share" },
  "afterSign": "scripts/afterSign-verify.js",
  "afterPack": "scripts/afterPack-fix-native.js",
  "nsis": {
    "oneClick": false,
    "perMachine": false,
    "allowToChangeInstallationDirectory": true,
    "shortcutName": "45Flow"
  },

  "linux": {
    "target": ["deb", "rpm"],
    "category": "Utility",
    "synopsis": "Share and review media via magic links",
    "vendor": "45Drives",
    "maintainer": "Jordan Keough <jkeough@45drives.com>",
    "icon": "assets/icons/linux"
  },

  "mac": {
    "hardenedRuntime": true,
    "entitlements": "entitlements.mac.plist",
    "entitlementsInherit": "entitlements.mac.inherit.plist",
    "signIgnore": [
      ".*\\.(png|jpe?g|svg|gif|webp|ico|icns)$",
      ".*\\.(mp3|wav|aac|mp4|mov|webm|ogg)$",
      ".*\\.(json|txt|md|html|css|map)$",
      ".*\\.(blend|glb|gltf|obj|fbx|mtl)$",
      ".*\\.pak$",
      ".*/[A-Za-z_]+\\.lproj/.*$",
      ".*/Electron Framework\\.framework/Versions/A/Resources/.*$",
      ".*/assets/.*"
    ],
    "icon": "assets/icons/mac/icon.icns"
  },
  "win": {
    "target": "nsis",
    "compression": "maximum",
    "icon": "assets/icons/win/icon.ico",
    "signAndEditExecutable": true
  },

  "files": [
    {
      "from": "build/main",
      "to": "main",
      "filter": ["**/*"]
    },
    {
      "from": "build/renderer",
      "to": "renderer",
      "filter": ["**/*"]
    },
    {
      "from": "src/main/static",
      "to": "static",
      "filter": ["**/*"]
    },
    "!src",
    "!build",
    "!builds",
    "!Mac-signed",
    "!Mac-signed/**",
    "!mac-signing-out",
    "!mac-signing-out/**",
    "!dist",
    "!scripts",
    "!houston-common",
    "!**/*.test.js",
    "!**/*.test.ts",
    "!**/*.md",
    "!**/*.config.js",
    "!**/*.config.ts",
    "!**/*.config.cjs",
    "!**/package-lock.json",
    "!**/.git*",
    "!**/__tests__/**",
    "!**/*.map",
    "!**/MakeFile",
    "!**/.yarn/**",
    "!**/node_modules/*/test/**",
    "!**/node_modules/*/.git/**",
    "!**/node_modules/@rollup/**",
    "!**/node_modules/rollup/**",
    "!**/node_modules/webpack/**",
    "!**/node_modules/esbuild/**",
    "!**/node_modules/@esbuild/**",
    "!**/node_modules/vite/**",
    "!**/node_modules/@vitejs/**",
    "!**/@esbuild/**",
    "!**/esbuild-*/**",
    "!**/node_modules/@vue/**",
    "!**/node_modules/typescript/**",
    "!**/node_modules/vue/**",
    "!**/node_modules/@types/**",
    "!**/node_modules/@45drives/houston-common-ui/node_modules/**",
    "!**/node_modules/@45drives/houston-common-ui/lib/**",
    "!**/node_modules/@45drives/houston-common-ui/scripts/**",
    "!**/node_modules/@45drives/houston-common-ui/typings/**",
    "!**/node_modules/@45drives/houston-common-lib/node_modules/**",
    "!**/node_modules/@45drives/houston-common-lib/lib/**",
    "!**/node_modules/@45drives/houston-common-lib/examples/**",
    "!**/node_modules/@45drives/houston-common-lib/scripts/**",
    "!**/node_modules/@45drives/houston-common-lib/tests/**",
    "!**/node_modules/@45drives/houston-common-lib/typings/**",
    "!**/node_modules/@45drives/houston-common-ui/lib/components/ServerView/assets/**",
    "!**/node_modules/@45drives/houston-common-ui/lib/components/img/**"
  ],
  "extraResources": [
    {
      "from": "src/main/static",
      "to": "static",
      "filter": ["**/*"]
    }
  ],
  "asar": true,
  "asarUnpack": [
    "**/*.node",
    "**/*.dylib"
  ]
}
